!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";(function(e){const n={default:0,warning:1,error:2};Object.freeze(n);const r={url:"url",json:"json",object:"object",javascript:"javascript"};function o(e,t){return"number"!=typeof t||t===n.default?console.log("%c[Native]%c %s","color: #0b78d7; font-weight: bold;","color: #333333",e):t===n.warning?console.log("%c[Native]%c %s","color: #0b78d7; font-weight: bold;","color: #f98300",e):console.log("%c[Native]%c %s","color: #0b78d7; font-weight: bold;","color: #c2352d",e)}function i(e){switch(typeof e){case"undefined":return"";case"number":return isNaN(e)?"":String(e);case"string":return encodeURIComponent(e);case"object":return e?encodeURIComponent(JSON.stringify(e)):"";default:return encodeURIComponent(JSON.stringify(e))}}function u(e){switch(typeof e){case"string":return encodeURIComponent(e);case"object":if(!e)return"";if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++)t.push(i(e[n]));return t.join("&")}const t=[];for(let n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+i(e[n]));return t.join("&");case"number":return isNaN(e)?"":String(number);case"undefined":return"";default:return encodeURIComponent(JSON.stringify(e))}}function a(e,t){for(let n in e){if(!e.hasOwnProperty(n))continue;const r=e[n];switch(typeof r){case"string":if(t(n,r))return!0;break;case"object":if(!r)continue;if(a(r,t))return!0}}return!1}function c(e,t){return"string"!=typeof e||0===e.length?o("NativeMethod 注册失败，方法名称必须为长度大于 0 的字符串！",n.error):c.hasOwnProperty(e)?o("NativeMethod 注册失败，已存在名称为“"+e+"”的方法！",n.error):a(c,function(e,n){return n===t})?o("NativeMethod 注册失败，已存在值为“"+t+"”的方法！",n.error):(Object.defineProperty(c,e,{get:function(){return t},enumerable:!0}),t)}function s(e,t){return"string"!=typeof e||0===e.length?o("NativeAction 注册失败，事件名称必须为长度大于 0 的字符串！",n.error):s.hasOwnProperty(e)?o("NativeAction 注册失败，已存在名称为“"+e+"”的事件！",n.error):a(s,function(e,n){return n===t})?o("NativeAction 注册失败，已存在值为“"+t+"”的事件！",n.error):(Object.defineProperty(s,e,{get:function(){return t},enumerable:!0}),t)}function f(e,t){return"string"!=typeof e||0===e.length?o("NativeCookieKey 注册失败，名称必须为长度大于 0 的字符串！",n.error):"string"!=typeof t||0===t.length?o("NativeCookieKey 注册失败，值必须为大于 0 的字符串！",n.error):f.hasOwnProperty(e)?o("NativeCookieKey 注册失败，已存在名称为“`"+e+"`”的 Cookie 键！",n.error):a(f,function(e,n){return n===t})?o("NativeCookieKey 注册失败，已存在值为“"+t+"”的 Cookie 键！",n.error):(Object.defineProperty(f,e,{get:function(){return t},enumerable:!0}),t)}Object.freeze(r);const l=new function(){let e=null;function t(t,n,r){if("string"!=typeof t)return null;if(1===arguments.length)return function(){if(e)return;e={};const t=document.cookie;if(!t)return;const n=t.split("; ");for(;n.length>0;){const t=n.pop();if(0===t.length)continue;const r=t.split("="),o=decodeURIComponent(r[0]);r.length>1?e[o]=decodeURIComponent(r[1]):e[name]=""}}(),e.hasOwnProperty(t)?e[t]:null;if(!n&&"object"==typeof n){const n=new Date;return n.setTime(n.getTime()-1),document.cookie=i(t)+"; expires="+n.toUTCString(),e&&e.hasOwnProperty(t)&&delete e[t],null}const o=new Date;return"number"==typeof r?o.setTime(o.getTime()+1e3*r):o.setTime(o.getTime()+2592e6),document.cookie=i(t)+"="+i(n)+"; expires="+o.toUTCString(),e&&(e[t]=n),n}function n(){return e=null,this}window.addEventListener("pageshow",function(){e=null}),Object.defineProperties(this,{value:{get:function(){return t}},synchronize:{get:function(){return n}}})},d=new function(){Object.defineProperties(this,{version:{get:function(){return"3.3.2"}},LogStyle:{get:function(){return n}},Mode:{get:function(){return r}},CookieKey:{get:function(){return f}},Method:{get:function(){return c}},Action:{get:function(){return s}},log:{get:function(){return o}},parseURLQuery:{get:function(){return u}},parseURLQueryComponent:{get:function(){return i}},cookie:{get:function(){return l}},enumerate:{get:function(){return a}}}),"undefined"!=typeof window?window.Native=this:void 0!==e?e.Native=this:o("不能输出全局引用 Native !",n.warning)};t.a=d}).call(this,n(2))},function(e,t,n){"use strict";(function(e){var r=n(0);r.a.Action("ready","ready"),r.a.Method("ready","ready");let o=r.a.Mode.url,i="native",u=null,a=!1,c={},s={},f=1e7,l={};const d=[],h=[];function g(){switch(o){case r.a.Mode.url:return function(e){const t=[];for(let e=1;e<arguments.length;e+=1){const n=arguments[e];"function"==typeof n?t.push(p(n)):t.push(n)}const n=i+"://"+e+"?parameters="+r.a.parseURLQueryComponent(t);if("function"==typeof u)return u(n);const o=document.createElement("iframe");o.style.display="none",o.setAttribute("src",n),document.body.appendChild(o),setTimeout(function(){document.body.removeChild(o)},2e3)}.apply(this,arguments);case r.a.Mode.json:return function(e){const t=[e];for(let e=1;e<arguments.length;e+=1){const n=arguments[e];switch(typeof n){case"number":case"string":case"boolean":t.push(n);break;case"function":t.push(p(n));break;default:t.push(JSON.stringify(n))}}M.apply(this,t)}.apply(this,arguments);case r.a.Mode.object:return M.apply(this,arguments);case r.a.Mode.javascript:return function(e){const t=[];for(let e=1;e<arguments.length;e++)"function"==typeof arguments[e]?t.push(p(arguments[e])):t.push(arguments[e]);u.call(this,e,t)}.apply(this,arguments)}}function p(e,t,n){switch(typeof e){case"function":const o="NTCB"+f++;return c[o]=e,o;case"string":if(!c.hasOwnProperty(e))return void r.a.log("指定标识符对应的注册函数没有找到："+e,r.a.LogStyle.error);const i=c[e];if((void 0===t||t)&&delete c[e],void 0===n||n){const e=this;return function(){return i.apply(e,arguments)}}return i;default:return void r.a.log("native.callback() 方法第一个参数必须为回调函数或回调函数的唯一ID。")}}function y(e,t){if("function"!=typeof t||"string"!=typeof e||0==e.length)return this;if(!s.hasOwnProperty(e))return s[e]=t,this;const n=s[e];return Array.isArray(n)?n.push(t):s[e]=[n,t],this}function m(e,t){if("string"!=typeof e||0==e.length)return this;if(!s.hasOwnProperty(e))return this;if(!t)return delete s[e],this;const n=s[e];if(Array.isArray(n)){for(var r=n.length-1;r>=0;r--)n[r]===t&&n.splice(r,1);return this}return n===t&&delete s[e],this}function v(e,t){const n=[];for(;t<e.length;)n.push(e[t++]);return n}function b(e){if("string"!=typeof e||0==e.length)return null;if(!s.hasOwnProperty(e))return null;const t=v(arguments,1),n=s[e];if("function"==typeof n)return JSON.stringify(n.apply(this,t));const r=n.slice(0);for(var o=0;o<n.length;o++)r.splice(o,1,n[o].apply(this,t));return JSON.stringify(r)}function w(e){return e?1===arguments.length&&"function"==typeof e?a?(setTimeout(e),this):(h.push(e),this):3==arguments.length?(b.call(this,r.a.Action.ready,e,arguments[1],arguments[2]),this):1===arguments.length&&"object"==typeof e&&o===r.a.Mode.url?(b.call(this,r.a.Action.ready,null,r.a.Mode.url,e),this):(r.a.log("方法 native.ready 不支持当前调用："+e,r.a.LogStyle.error),this):this}function C(e){if("function"!=typeof e)return this;if(a){const t=e.call(this,l);return t&&"object"==typeof t&&Object.defineProperties(this,t),this}return d.push(e),this}function M(e){const t=e.split("/");let n=u;for(let e=0;e<t.length;e++){const r=t[e];n.hasOwnProperty(r)?n=n[r]:n=null}return n&&"function"==typeof n?n.apply(this,v(arguments,1)):r.a.log("执行原生方法发生错误：在代理对象（"+u+"）上没有找到待执行的方法（"+n+"）！",r.a.LogStyle.error)}y(r.a.Action.ready,function e(t,n,i){if(a)r.a.log("重复初始化被忽略：native 已完成初始化，但是又收到初始化事件，请检查！");else if(r.a.enumerate(r.a.Mode,function(e,t){return t===n})){for(a=!0,u=t,o=n,l=i;d.length>0;){const e=d.shift().call(this,l);e&&"object"==typeof e&&Object.defineProperties(this,e)}for(;h.length>0;)h.shift().call(this);m(r.a.Action.ready,e)}else r.a.log("初始化错误：不支持 "+n+" 交互模式！",r.a.LogStyle.error)}),function(e){function t(){g.call(e,r.a.Method.ready,a)}if("complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll)setTimeout(function(){t()});else{function n(){document.removeEventListener("DOMContentLoaded",n),window.removeEventListener("load",n),t()}document.addEventListener("DOMContentLoaded",n),window.addEventListener("load",n)}}(void 0);const S=new function(){Object.defineProperties(this,{mode:{get:function(){return o}},scheme:{get:function(){return i}},delegate:{get:function(){return u}},isReady:{get:function(){return a}},performMethod:{get:function(){return g}},callback:{get:function(){return p}},addActionTarget:{get:function(){return y}},removeActionTarget:{get:function(){return m}},sendAction:{get:function(){return b}},ready:{get:function(){return w}},extend:{get:function(){return C}}}),"undefined"!=typeof window?window.native=this:void 0!==e?e.native=this:r.a.log("不能输出全局引用 native !",r.a.LogStyle.warning)};t.a=S}).call(this,n(2))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";n.r(t);var r=n(0),o=n(1);r.a.Method("alert","alert"),o.a.extend(function(){function e(e,t){return this.performMethod(r.a.Method.alert,e,t)}return{alert:{get:function(){return e}}}});o.a;r.a.Method("dataService",Object.freeze({cachedResourceForURL:"dataService/cachedResourceForURL",numberOfRowsInList:"dataService/numberOfRowsInList",dataForRowAtIndex:"dataService/dataForRowAtIndex"}));const i=Object.freeze({image:"image"});Object.defineProperty(r.a,"CachedResourceType",{get:function(){return i}}),o.a.extend(function(){const e=new function(){function e(e,t,n){return"string"!=typeof e||"string"!=typeof t?(r.a.log("Method `numberOfRowsInList` first/second parameter must be a string value.",r.a.LogStyle.error),null):o.a.performMethod(r.a.Method.dataService.numberOfRowsInList,e,t,n)}function t(e,t,n,i){return"string"!=typeof e||"string"!=typeof t||"number"!=typeof n?(r.a.log("Method `dataForRowAtIndex` first/second/third parameter must be a string/string/number value.",r.a.LogStyle.error),null):o.a.performMethod(r.a.Method.dataService.dataForRowAtIndex,e,t,n,i)}function n(e,t,n){if("string"!=typeof e)return r.a.log("Method `cachedResourceForURL` url parameter must be a string value.",r.a.LogStyle.error),null;switch(typeof t){case"function":n=t,t=r.a.CachedResourceType.image;break;case"string":break;default:t=r.a.CachedResourceType.image}return"function"!=typeof n?(r.a.log("Method `cachedResourceForURL` must have a callback handler.",r.a.LogStyle.error),null):o.a.performMethod(r.a.Method.dataService.cachedResourceForURL,e,t,n)}Object.defineProperties(this,{numberOfRowsInList:{get:function(){return e}},dataForRowAtIndex:{get:function(){return t}},cachedResourceForURL:{get:function(){return n}}})};return{dataService:{get:function(){return e}}}});o.a;r.a.Method("eventService",Object.freeze({track:"eventService/track",documentElementWasClicked:"eventService/documentElementWasClicked",documentElementDidSelect:"eventService/documentElementDidSelect"})),o.a.extend(function(){const e=new function(){function e(e,t,n,i){return"string"!=typeof e||"string"!=typeof t||void 0!==n?(r.a.log("Method `documentElementDidSelect` first/second/third parameter must be a string/string/number value.",r.a.LogStyle.error),null):o.a.performMethod(r.a.Method.eventService.documentElementDidSelect,e,t,n,i)}function t(e,t,n,i){return"string"!=typeof e||"string"!=typeof t?(r.a.log("Method `elementWasClicked` first/second parameter must be a string value.",r.a.LogStyle.error),null):("function"==typeof n&&(i=n,n=null),o.a.performMethod(r.a.Method.eventService.documentElementWasClicked,e,t,n,i))}function n(e,t){return"string"!=typeof e?(r.a.log("Method `track` first parameter must be a string value.",r.a.LogStyle.error),null):o.a.performMethod(r.a.Method.eventService.track,e,t)}Object.defineProperties(this,{documentElementDidSelect:{get:function(){return e}},documentElementWasClicked:{get:function(){return t}},track:{get:function(){return n}}})};return{eventService:{get:function(){return e}}}});o.a;r.a.Method("navigation",Object.freeze({push:"navigation/push",pop:"navigation/pop",popTo:"navigation/popTo",bar:Object.freeze({setHidden:"navigation/bar/setHidden",setTitle:"navigation/bar/setTitle",setTitleColor:"navigation/bar/setTitleColor",setBackgroundColor:"navigation/bar/setBackgroundColor"})})),o.a.extend(function(e){function t(e){let t=e.title,n=e.titleColor,i=e.backgroundColor,u=e.isHidden;function a(e,n){return"string"!=typeof e?(r.a.log("The navigation.bar.title must be a string value.",r.a.LogStyle.error),this):(t=e,n&&o.a.performMethod(r.a.Method.navigation.bar.setTitle,e),this)}function c(e,t){return"string"!=typeof e?(r.a.log("The navigation.bar.titleColor must be a string value.",r.a.LogStyle.error),this):(n=e,t&&o.a.performMethod(r.a.Method.navigation.bar.setTitleColor,e),this)}function s(e,t,n){return"boolean"!=typeof e?(r.a.log("The navigation.bar.isHidden must be a boolean value.",r.a.LogStyle.error),this):(u=e,n&&o.a.performMethod(r.a.Method.navigation.bar.setHidden,e,t),this)}function f(e){return s(!0,e,!0),this}function l(e){return s(!1,e,!0),this}function d(e,t){return"string"!=typeof e?(r.a.log("The navigation.bar.backgroundColor must be a string value.",r.a.LogStyle.error),this):(i=e,t?(o.a.performMethod(r.a.Method.navigation.bar.setBackgroundColor,e),this):this)}Object.defineProperties(this,{title:{get:function(){return t},set:function(e){a(e,!0)}},titleColor:{get:function(){return n},set:function(e){c(e,!0)}},backgroundColor:{get:function(){return i},set:function(e){d(e,!0)}},isHidden:{get:function(){return u},set:function(e){s(e,!1,!0)}},setTitle:{get:function(){return a}},setTitleColor:{get:function(){return c}},setBackgroundColor:{get:function(){return d}},setHidden:{get:function(){return s}},hide:{get:function(){return f}},show:{get:function(){return l}}})}let n=e.navigation;n||(n={bar:{title:"native.js",titleColor:"#000",backgroundColor:"#fff",isHidden:!1}});const i=new function(e){let n=function(e,t){if("string"!=typeof e)return r.a.log("Method `push` can not be called without a url parameter.",r.a.LogStyle.error),null;if(!/^([a-z]+):\/\//i.test(e))if(/^(\/)/i.test(e))e=window.location.protocol+"//"+window.location.host+e;else{let t=window.location.href.split("/");t.pop(),e=t.join("/")+"/"+e}return"boolean"!=typeof t&&(t=!0),o.a.performMethod(r.a.Method.navigation.push,e,t)},i=function(e){return"boolean"!=typeof e&&(e=!0),o.a.performMethod(r.a.Method.navigation.pop,e)},u=function(e,t){if("number"==typeof e)return"boolean"!=typeof t&&(t=!0),o.a.performMethod(r.a.Method.navigation.popTo,e,t);r.a.log("Method `popTo` can not be called without a index parameter.",r.a.LogStyle.error)},a=e.bar;a||(a={title:"native.js",titleColor:"#000",backgroundColor:"#fff",isHidden:!1});let c=new t(a);Object.defineProperties(this,{push:{get:function(){return n}},pop:{get:function(){return i}},popTo:{get:function(){return u}},bar:{get:function(){return c}}})}(n);return{navigation:{get:function(){return i}}}});o.a;r.a.Method("networking",Object.freeze({http:"networking/http"}));const u=Object.freeze({WiFi:"WiFi"});Object.defineProperty(r.a,"NetworkStatus",{get:function(){return u}}),o.a.extend(function(e){let t=e.networking;t||(t={status:"Unknown"});const n=new function(e){let t=e.status,n=[];function i(e,t){return e&&"object"==typeof e?o.a.performMethod(r.a.Method.networking.http,e,t):(r.a.log("Method `http` first parameter must be an request object.",r.a.LogStyle.error),null)}function a(e){if("function"==typeof e)return n.push(e),this;for(let e=0;e<n.length;e++)n[e].call(window)}function c(e){t=e,a()}Object.defineProperties(this,{isViaWiFi:{get:function(){return t===u.WiFi}},status:{get:function(){return t}},isReachable:{get:function(){return!!t}},statusChange:{get:function(){return a}},http:{get:function(){return i}},setStatus:{get:function(){return c}}})}(t);return{networking:{get:function(){return n}},http:{get:function(){return n.http}}}});o.a;r.a.Method("open","open"),o.a.extend(function(){function e(e){return"string"!=typeof e?(r.a.log("Method `open`'s page parameter must be a string value.",r.a.LogStyle.error),null):this.performMethod(r.a.Method.open,e)}return{open:{get:function(){return e}}}});o.a;r.a.Method("present","present"),r.a.Method("dismiss","dismiss"),o.a.extend(function(){function e(e,t,n){if("string"!=typeof e)return r.a.log("Method `present` first parameter must be a string value.",r.a.LogStyle.error),null;let o=t,i=n;return"function"==typeof t&&(o=!0,i=t),"boolean"!=typeof o&&(o=!0),this.performMethod(r.a.Method.present,e,o,i)}function t(e,t){let n=e,o=t;return"function"==typeof e&&(n=!0,o=e),"boolean"!=typeof n&&(n=!0),this.performMethod(r.a.Method.dismiss,n,o)}return{present:{get:function(){return e}},dismiss:{get:function(){return t}}}});o.a;r.a.Method("setCurrentTheme","setCurrentTheme"),r.a.CookieKey("currentTheme","com.mlibai.native.cookie.currentTheme"),r.a.Action("setCurrentTheme","setCurrentTheme"),r.a.Action("currentThemeChange","currentThemeChange"),o.a.extend(function(e){let t=e.currentTheme;function n(e,n,o){return void 0===o||o?(t=e,r.a.cookie.value(r.a.CookieKey.currentTheme,e),this.performMethod(r.a.Method.setCurrentTheme,newValue,n)):this.sendAction(r.a.Action.setCurrentTheme,e,n)}function i(e,n){return"function"==typeof e?this.addActionTarget(r.a.Action.currentThemeChange,e):this.sendAction(r.a.Action.currentThemeChange,t,!!n)}return this.addActionTarget(r.a.Action.setCurrentTheme,function(e,n){t=e,r.a.cookie.value(r.a.CookieKey.currentTheme,e)}),function(){function e(){let e=r.a.cookie.value(r.a.CookieKey.currentTheme);e&&e!==o.a.currentTheme&&(t=e,o.a.sendAction(r.a.Action.currentThemeChange,e,!1))}window.addEventListener("pagehide",function t(){window.removeEventListener("pagehide",t),window.addEventListener("pageshow",e)})}(),{currentTheme:{get:function(){return t},set:function(e){n(e,!1,!0)}},currentThemeChange:{get:function(){return i}},setCurrentTheme:{get:function(){return n}}}});o.a;r.a.Method("login","login"),r.a.CookieKey("currentUser","com.mlibai.native.cookie.currentUser"),r.a.Action("setCurrentUser","setCurrentUser"),r.a.Action("currentUserChange","currentUserChange"),o.a.extend(function(e){let t=e.currentUser;t||(t={id:"0",name:"Visitor",info:{},version:"0"});let n=new a(t.id,t.name,t.info,t.version);function i(e){return"function"==typeof e?this.addActionTarget(r.a.Action.currentUserChange,e):this.sendAction(r.a.Action.currentUserChange,n)}function u(e){return this.sendAction(r.a.Action.setCurrentUser,e)}function a(e,t,n,r){Object.defineProperties(this,{id:{get:function(){return e}},name:{get:function(){return t}},info:{get:function(){return n}},version:{get:function(){return r}}})}function c(e){return this.performMethod(r.a.Method.login,function(t){n=new a(t.id,t.name,t.info,t.version),"function"==typeof e&&e.call(this,n)})}return r.a.cookie.value(r.a.CookieKey.currentUser,JSON.stringify(n)),this.addActionTarget(r.a.Action.setCurrentUser,function(e){n=new a(e.id,e.name,e.info,e.version),r.a.cookie.value(r.a.CookieKey.currentUser,JSON.stringify(n)),this.sendAction(r.a.Action.currentUserChange,n)}),function(){function e(){let e=JSON.parse(r.a.cookie.value(r.a.CookieKey.currentUser));e.id===o.a.currentUser.id&&e.version===o.a.currentUser.version||(n=new a(e.id,e.name,e.info,e.version),o.a.sendAction(r.a.Action.currentUserChange,n))}window.addEventListener("pagehide",function t(){window.addEventListener("pageshow",e),window.removeEventListener("pagehide",t)})}(),{setCurrentUser:{get:function(){return u}},currentUserChange:{get:function(){return i}},currentUser:{get:function(){return n}},login:{get:function(){return c}}}});o.a;n.d(t,"Native",function(){return r.a}),n.d(t,"native",function(){return o.a});t.default=o.a}]);