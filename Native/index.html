<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>AppCore</title>
    <script src="Example/jquery-3.1.1.min.js"></script>
    <script src="native/native.js"></script>

    <script>

        Native.log("Native Version: " + Native.version);
        Native.log("Warning Log Message", 1);
        Native.log("Error Log Message", 2);
        
        native.ready(function () {

           $("#alert").click(function () {
               native.alert({
                   title: "This is an alert!",
                   body: "This is alert body!",
                   actions: ["OK", "Cancel"]
               }, function (index) {
                   NativeLog("alert: " + index);
               });
           });

           native.dataService.numberOfRowsInList("main", "test", function (number) {
               for (let i = 0; i < number; i++) {
                   native.dataService.dataForRowAtIndex("main", "test", i, function (data) {
                       $("#dataService").append("<tr><td>" + data + "</td></tr>")
                   })
               }
           });

           $("#cachedResourceForURL").click(function () {
               native.dataService.cachedResourceForURL("https://img0.bdstatic.com/static/searchresult/img/logo-2X_b99594a.png", "image", function (url) {
                   $("#cachedResourceForURLImage").attr("src", url);
               });
           });

        });

    </script>
</head>
<body>

    <input type="button" value="Alert" id="alert">

    <table id="dataService" width="100%" border="1">

    </table>
    <input type="button" value="Image" id="cachedResourceForURL" />
    <img src="" alt="" id="cachedResourceForURLImage" />

</body>
</html>


<script>

    // 模拟 App 行为
//    native.core.register(function (method, parameters, callbackID) {
//        NativeLog("执行方法 "+ method);
//        switch (method) {
//            case NativeMethodReady:
//                native.core.dispatch(callbackID, {
//                    currentTheme: "default",
//                    currentUser: {
//                        id: 123,
//                        name: "John",
//                        info: {},
//                        version: 1
//                    },
//                    navigation: {
//                        bar: {
//                            title: "Test",
//                            titleColor: "#000",
//                            isHidden: false,
//                            backgroundColor: "#fff"
//                        }
//                    },
//                    networking: {
//                        status: "WiFi"
//                    }
//                });
//                break;
//
//            case NativeMethodAlert:
//                if (confirm(JSON.stringify(parameters))) {
//                    native.core.dispatch(callbackID, 0);
//                } else {
//                    native.core.dispatch(callbackID, 1);
//                }
//                break;
//
//            case NativeMethodNumberOfRowsInList:
//                native.core.dispatch(callbackID, 10);
//                break;
//
//            case NativeMethodDataForRowAtIndex:
//                native.core.dispatch(callbackID, "Row " + parameters[2]);
//                break;
//
//            case NativeMethodCachedResourceForURL:
//                native.core.dispatch(callbackID, parameters[0]);
//                break;
//
//            default:
//                NativeLog("Method: " + method);
//                break;
//        }
//    }, NativeTypeFunction);

</script>