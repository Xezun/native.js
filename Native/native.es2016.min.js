const NativeMode=function(){let a=Object.freeze({url:"url",json:"json",object:"object",javascript:"javascript"});return _NativeDefineProperty(window,"NativeMode",{get:function(){return a}}),_NativeDefineProperty(window,"NativeType",{get:function(){return _NativeLog("NativeType was deprecated, please use NativeMode instead.",1),a}}),a}(),NativeLogStyle=function(){let a=Object.freeze({default:0,warning:1,error:2});return _NativeDefineProperty(window,"NativeLogStyle",{get:function(){return a}}),a}(),NativeMethod=function(){let a=Object.freeze({ready:"ready",alert:"alert",dataService:Object.freeze({cachedResourceForURL:"dataService/cachedResourceForURL",numberOfRowsInList:"dataService/numberOfRowsInList",dataForRowAtIndex:"dataService/dataForRowAtIndex"}),eventService:Object.freeze({track:"eventService/track",documentElementWasClicked:"eventService/documentElementWasClicked",documentElementDidSelect:"eventService/documentElementDidSelect"}),login:"login",navigation:Object.freeze({push:"navigation/push",pop:"navigation/pop",popTo:"navigation/popTo",bar:Object.freeze({setHidden:"navigation/bar/setHidden",setTitle:"navigation/bar/setTitle",setTitleColor:"navigation/bar/setTitleColor",setBackgroundColor:"navigation/bar/setBackgroundColor"})}),networking:Object.freeze({http:"networking/http"}),open:"open",present:"present",dismiss:"dismiss",setCurrentTheme:"setCurrentTheme"});return _NativeDefineProperty(window,"NativeMethod",{get:function(){return a}}),a}(),NativeCookieKey=function(){let a=Object.freeze({currentTheme:"com.mlibai.native.cookie.currentTheme",currentUser:"com.mlibai.native.cookie.currentUser"});return _NativeDefineProperty(window,"NativeCookieKey",{get:function(){return a}}),a}(),NativeCachedResourceType=Object.freeze({image:"image"}),Native=function(){function a(d){if(!d)return"";switch(typeof d){case"string":return encodeURIComponent(d);case"undefined":return"";default:return encodeURIComponent(JSON.stringify(d));}}function b(d){if(!d)return"";if(Array.isArray(d)){let e=[];for(let f=0;f<d.length;f++)e.push(a(d[f]));return e.join("&")}switch(typeof d){case"string":return encodeURIComponent(d);case"object":let e="";for(let f in d)d.hasOwnProperty(f)&&(0<e.length?e+="&"+encodeURIComponent(f):e=encodeURIComponent(f),!!d[f])&&(e+="="+a(d[f]));return e;case"undefined":return"";default:return encodeURIComponent(JSON.stringify(d));}}let c=new _Cookie;return _NativeDefineProperty(window,"Native",{get:function(){return _Native}}),_NativeDefineProperties(_Native,{version:{get:function(){return"1.0.0"}},log:{get:function(){return _NativeLog}},cookie:{get:function(){return c}},parseURLQueryValue:{get:function(){return a}},parseURLQuery:{get:function(){return b}}}),_Native}(),native=function(){let a=new Native;return _NativeDefineProperty(window,"native",{get:function(){return a}}),a}();function _NativeLog(a,b){"number"!=typeof b||0===b?console.log("%c[Native]%c %s","color: #0b78d7; font-weight: bold;","color: #333333",a):1===b?console.log("%c[Native]%c %s","color: #0b78d7; font-weight: bold;","color: #fe7e3c",a):2==b&&console.log("%c[Native]%c %s","color: #0b78d7; font-weight: bold;","color: #d8463c",a)}function _NativeDefineProperty(a,b,c){return"undefined"==typeof a?_NativeLog("Define property error: Can not define properties for an undefined value.",2):"string"!=typeof b||0===b.length?_NativeLog("Define property error: The name for "+a.constructor.name+"'s property must be a nonempty string.",2):a.hasOwnProperty(b)?_NativeLog("Define property warning: The property "+b+" to be defined for "+a.constructor.name+" is already exist.",1):void Object.defineProperty(a,b,c)}function _NativeDefineProperties(a,b){if("undefined"==typeof a)return _NativeLog("Define properties error: Can not define properties for an undefined value.",2);if("object"!=typeof b)return _NativeLog("Define properties error: The property list for "+a.constructor.name+" at second parameter must be an Object.",2);for(let c in b)b.hasOwnProperty(c)&&_NativeDefineProperty(a,c,b[c])}function _Native(){function a(h){return g.isReady?(window.setTimeout(h),this):(e.push(h),this)}function b(h){return"function"==typeof h?(g.isReady?_NativeDefineProperties(this,h.apply(this,[c])):d.push(h),this):this}let c=null,d=[],e=[],f=this,g=new _CoreNative(function(h){for(c=h;0<d.length;){let j=d.shift();_NativeDefineProperties(f,j.apply(f,[c]))}for(;0<e.length;)e.shift().apply(window)});_NativeDefineProperties(this,{core:{get:function(){return g}},ready:{get:function(){return a}},extend:{get:function(){return b}}})}function _CoreNative(a){function b(q,r){switch(typeof q){case"function":let s="NT"+j++;return k[s]=q,s;case"string":if(!k.hasOwnProperty(q))return;let t=k[q];return(r||"undefined"==typeof r)&&delete k[q],t;default:return Native.log("Only callback function or callback is allowed",NativeLogStyle.error),void 0;}}function c(){return l===NativeMode.url?d.apply(this,arguments):l===NativeMode.json?e.apply(this,arguments):l===NativeMode.object?f.apply(this,arguments):l===NativeMode.javascript?g.apply(this,arguments):Native.log("\u8C03\u7528\u539F\u751F App \u65B9\u6CD5\u5931\u8D25\uFF0C\u65E0\u6CD5\u786E\u5B9A\u539F\u751FApp\u53EF\u63A5\u53D7\u7684\u6570\u636E\u7C7B\u578B\u3002",NativeLogStyle.error)}function d(q){let r=[];for(let v,u=1;u<arguments.length;u+=1)v=arguments[u],"function"==typeof v?r.push(b(v)):r.push(v);let s=n+"://"+q+"?parameters="+Native.parseURLQueryValue(r),t=document.createElement("iframe");t.style.display="none",t.setAttribute("src",s),document.body.appendChild(t),window.setTimeout(function(){document.body.removeChild(t)},2e3),"function"==typeof m&&m(s)}function e(q){let r=[q];for(let t,s=1;s<arguments.length;s+=1)switch(t=arguments[s],typeof t){case"number":case"string":case"boolean":r.push(t);break;case"function":r.push(b(t));break;default:r.push(JSON.stringify(t));}f.apply(this,r)}function f(q){let r=[];for(let s=1;s<arguments.length;s+=1)r.push(arguments[s]);window.setTimeout(function(){let s=q.split("/"),t=m;for(let u=0;u<s.length;u++)t=t[s[u]];t.apply(window,r)})}function g(q){let r=[];for(let s=1;s<arguments.length;s++)"function"==typeof arguments[s]?r.push(b(arguments[s])):r.push(arguments[s]);window.setTimeout(function(){m.apply(window,[q,r])})}function h(q,r){function s(){p=c(window.NativeMethod.ready,function(t){o=!0,p=null,a(t)})}if(m=q,l=r,o)return this;if(!p||b(p,!0),"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll)window.setTimeout(function(){s()});else{function t(){document.removeEventListener("DOMContentLoaded",t),window.removeEventListener("load",t),s()}document.addEventListener("DOMContentLoaded",t),window.addEventListener("load",t)}return this}let j=1e7,k={},l=NativeMode.url,m=null,n="native",o=!1,p=null;_NativeDefineProperties(this,{callback:{get:function(){return b}},perform:{get:function(){return c}},scheme:{get:function(){return n},set:function(q){n=q}},isReady:{get:function(){return o}},register:{get:function(){return h}},delegate:{get:function(){return m},set:function(q){m=q}},mode:{get:function(){return l},set:function(q){l=q}}})}function _Cookie(){function a(){if(!d){d={},window.setTimeout(function(){d=null});let e=document.cookie;if(e)for(let g,f=e.split("; ");0<f.length;)if(g=f.pop().split("="),Array.isArray(g)&&0!==g.length){let h=decodeURIComponent(g[0]);d[h]=1<g.length?decodeURIComponent(g[1]):null}}}function b(e,f){if("undefined"==typeof f)return a(),d.hasOwnProperty(e)?d[e]:void 0;let g=new Date;return f?(g.setTime(g.getTime()+2592000000),"string"!=typeof f&&(f=JSON.stringify(f)),document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(f)+"; expires="+g.toUTCString()):(g.setTime(g.getTime()-1),document.cookie=encodeURIComponent(e)+"; expires="+g.toUTCString()),!d||(d[e]=f),this}function c(){return d=null,this}let d=null;_NativeDefineProperties(this,{value:{get:function(){return b}},synchronize:{get:function(){return c}}})}native.extend(function(){function a(b){if(!b)return Native.log("Method `login` called without a callback is not allowed.",NativeLogStyle.error),this;let c=this;this.core.perform(NativeMethod.login,function(d){c.setCurrentUser(d),b()})}return{login:{get:function(){return a}}}}),native.extend(function(a){function b(g){if("function"==typeof g)return e.push(g),this;for(let h=0;h<e.length;h++)e[h].call(window);return this}function c(g,h,j,k){_NativeDefineProperties(this,{id:{get:function(){return g}},name:{get:function(){return h}},info:{get:function(){return j}},version:{get:function(){return k}}})}function d(g){f=new c(g.id,g.name,g.info,g.version),b()}let e=[],f=new c(a.currentUser.id,a.currentUser.name,a.currentUser.info,a.currentUser.version);return Native.cookie.value(NativeCookieKey.currentUser,JSON.stringify(f)),function(g){function h(){let k=JSON.parse(window.Native.cookie.value(NativeCookieKey.currentUser));(k.id!==g.currentUser.id||k.version!==g.currentUser.version)&&g.setCurrentUser(k)}function j(){window.addEventListener("pageshow",h),window.removeEventListener("pagehide",j)}window.addEventListener("pagehide",j)}(this),{setCurrentUser:{get:function(){return d}},currentUserChange:{get:function(){return b}},currentUser:{get:function(){return f}}}}),native.extend(function(a){function b(f){function g(r,s){return"string"==typeof r?(n=r,s&&d.perform(NativeMethod.navigation.bar.setTitle,r),this):(Native.log("The navigation.bar.title must be a string value.",NativeLogStyle.error),this)}function h(r,s){return"string"==typeof r?(o=r,s&&d.perform(NativeMethod.navigation.bar.setTitleColor,r),this):(Native.log("The navigation.bar.titleColor must be a string value.",NativeLogStyle.error),this)}function j(r,s,t){return"boolean"==typeof r?(q=r,t&&d.perform(NativeMethod.navigation.bar.setHidden,r,s),this):(Native.log("The navigation.bar.isHidden must be a boolean value.",NativeLogStyle.error),this)}function k(r){return j(!0,r,!0),this}function l(r){return j(!1,r,!0),this}function m(r,s){return"string"==typeof r?(p=r,!s)?this:(d.perform(NativeMethod.navigation.bar.setBackgroundColor,r),this):(Native.log("The navigation.bar.backgroundColor must be a string value.",NativeLogStyle.error),this)}let n=f.title,o=f.titleColor,p=f.backgroundColor,q=f.isHidden;_NativeDefineProperties(this,{title:{get:function(){return n},set:function(r){g(r,!0)}},titleColor:{get:function(){return o},set:function(r){h(r,!0)}},backgroundColor:{get:function(){return p},set:function(r){m(r,!0)}},isHidden:{get:function(){return q},set:function(r){j(r,!1,!0)}},setTitle:{get:function(){return g}},setTitleColor:{get:function(){return h}},setBackgroundColor:{get:function(){return m}},setHidden:{get:function(){return j}},hide:{get:function(){return k}},show:{get:function(){return l}}})}let d=this.core,e=new function(f){let g=function(l,m){if("string"!=typeof l)return Native.log("Method `push` can not be called without a url parameter.",NativeLogStyle.error),null;if(!/^([a-z]+):\/\//i.test(l))if(/^(\/)/i.test(l))l=window.location.protocol+"//"+window.location.host+l;else{let n=window.location.href.split("/");n.pop(),l=n.join("/")+"/"+l}return"boolean"!=typeof m&&(m=!0),d.perform(NativeMethod.navigation.push,l,m)},h=function(l){return"boolean"!=typeof l&&(l=!0),d.perform(NativeMethod.navigation.pop,l)},j=function(l,m){return"number"==typeof l?("boolean"!=typeof m&&(m=!0),d.perform(NativeMethod.navigation.popTo,l,m)):void Native.log("Method `popTo` can not be called without a index parameter.",NativeLogStyle.error)},k=new b(f.bar);_NativeDefineProperties(this,{push:{get:function(){return g}},pop:{get:function(){return h}},popTo:{get:function(){return j}},bar:{get:function(){return k}}})}(a.navigation);return{navigation:{get:function(){return e}}}});const NativeNetworkStatus=Object.freeze({WiFi:"WiFi"});native.extend(function(a){let c=this.core,d=new function(e){function f(l,m){return l&&"object"==typeof l?c.perform(NativeMethod.networking.http,l,m):(Native.log("Method `http` first parameter must be an request object.",NativeLogStyle.error),null)}function g(l){if("function"==typeof l)return k.push(l),this;for(let m=0;m<k.length;m++)k[m].call(window)}function h(l){j=l,g()}let j=e.status,k=[];_NativeDefineProperties(this,{isViaWiFi:{get:function(){return j===NativeNetworkStatus.WiFi}},status:{get:function(){return j}},isReachable:{get:function(){return!!j}},statusChange:{get:function(){return g}},http:{get:function(){return f}},setStatus:{get:function(){return h}}})}(a.networking);return{networking:{get:function(){return d}},http:{get:function(){return d.http}}}}),native.extend(function(){function a(b){return"string"==typeof b?this.core.perform(NativeMethod.open,b):(Native.log("Method `open`'s page parameter must be a string value.",NativeLogStyle.error),null)}return{open:{get:function(){return a}}}}),native.extend(function(){function a(c,d,e){if("string"!=typeof c)return Native.log("Method `present` first parameter must be a string value.",NativeLogStyle.error),null;let f=d,g=e;return"function"==typeof d&&(f=!0,g=d),"boolean"!=typeof f&&(f=!0),this.core.perform(NativeMethod.present,c,f,g)}function b(c,d){let e=c,f=d;return"function"==typeof c&&(e=!0,f=c),"boolean"!=typeof e&&(e=!0),this.core.perform(NativeMethod.dismiss,e,f)}return{present:{get:function(){return a}},dismiss:{get:function(){return b}}}}),native.extend(function(a){function b(f,g,h){d=f,window.Native.cookie.value(NativeCookieKey.currentTheme,f),h||"undefined"==typeof h?this.core.perform(NativeMethod.setCurrentTheme,f,g):c()}function c(f,g){if("function"==typeof f)return e.push({callback:f,animated:g}),this;for(let j,h=0;h<e.length;h++)j=e[h],j.callback.call(window,j.animated);return this}let d=a.currentTheme,e=[];return function(f){function g(){let j=window.Native.cookie.value(NativeCookieKey.currentTheme);j&&j!==f.currentTheme&&(f.setCurrentTheme(j,!1,!1),f.currentThemeChange())}function h(){window.removeEventListener("pagehide",h),window.addEventListener("pageshow",g)}window.addEventListener("pagehide",h)}(this),{currentTheme:{get:function(){return d},set:function(f){b(f,!1,!0)}},currentThemeChange:{get:function(){return c}},setCurrentTheme:{get:function(){return b}}}}),native.extend(function(){let b=this.core,c=new function(){function d(g,h,j,k){return"string"!=typeof g||"string"!=typeof h||"undefined"!=typeof j?(Native.log("Method `documentElementDidSelect` first/second/third parameter must be a string/string/number value.",NativeLogStyle.error),null):b.perform(NativeMethod.eventService.documentElementDidSelect,g,h,j,k)}function e(g,h,j,k){return"string"!=typeof g||"string"!=typeof h?(Native.log("Method `elementWasClicked` first/second parameter must be a string value.",NativeLogStyle.error),null):("function"==typeof j&&(k=j,j=null),b.perform(NativeMethod.eventService.documentElementWasClicked,g,h,j,k))}function f(g,h){return"string"==typeof g?b.perform(NativeMethod.eventService.track,g,h):(Native.log("Method `track` first parameter must be a string value.",NativeLogStyle.error),null)}_NativeDefineProperties(this,{documentElementDidSelect:{get:function(){return d}},documentElementWasClicked:{get:function(){return e}},track:{get:function(){return f}}})};return{eventService:{get:function(){return c}}}}),native.extend(function(){let b=this.core,c=new function(){function d(g,h,j){return"string"!=typeof g||"string"!=typeof h?(Native.log("Method `numberOfRowsInList` first/second parameter must be a string value.",NativeLogStyle.error),null):b.perform(NativeMethod.dataService.numberOfRowsInList,g,h,j)}function e(g,h,j,k){return"string"!=typeof g||"string"!=typeof h||"number"!=typeof j?(Native.log("Method `dataForRowAtIndex` first/second/third parameter must be a string/string/number value.",NativeLogStyle.error),null):b.perform(NativeMethod.dataService.dataForRowAtIndex,g,h,j,k)}function f(g,h,j){if("string"!=typeof g)return Native.log("Method `cachedResourceForURL` url parameter must be a string value.",NativeLogStyle.error),null;switch(typeof h){case"function":j=h,h=NativeCachedResourceType.image;break;case"string":break;default:h=NativeCachedResourceType.image;}return"function"==typeof j?b.perform(NativeMethod.dataService.cachedResourceForURL,g,h,j):(Native.log("Method `cachedResourceForURL` must have a callback handler.",NativeLogStyle.error),null)}_NativeDefineProperties(this,{numberOfRowsInList:{get:function(){return d}},dataForRowAtIndex:{get:function(){return e}},cachedResourceForURL:{get:function(){return f}}})};return{dataService:{get:function(){return c}}}}),native.extend(function(){function a(b,c){return b&&"object"==typeof b?this.core.perform(NativeMethod.alert,b,c):(Native.log("Method `alert` first parameter must be an message object.",NativeLogStyle.error),null)}return{alert:{get:function(){return a}}}});